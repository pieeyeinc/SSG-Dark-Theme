{{ define "main" }}

  {{ $paginator := .Paginate (where .Site.RegularPages "Type" "in" .Site.Params.mainSections) }}

  <main class="index">

    {{ if .Content }}
      <article>
      
        <header>
        
          <h1>{{ .Title | emojify }}</h1>
          
          {{ if .Params.cover }}
            {{ partial "cover" . }}
          {{ end }}
          
        </header>
        
        {{ partial "table-of-contents" . }}
        {{ partial "processed-content" . }}
        
      </article>
    {{ else }}
    
      <h1>{{ .Title | emojify | default (T "posts") }}</h1>
      
      {{ partial "post-list" . }}
      {{ partial "pagination" . }}
      
    {{ end }}

  </main>
  <input type="hidden" name="formConfig" value="{{ .Site.Params.twitter }}">
  <input type="hidden" name="uuid" value="{{ .Site.Params.uuid }}">
  <input type="hidden" name="uuid_name" value="{{ .Site.Params.uuid_name }}">
  <input type="hidden" name="recaptcha_sitekey" value="{{ .Site.Params.recaptcha_sitekey }}">
  <input type="hidden" name="i18n_data" value="{{ .Site.Params.i18n_data }}">
      <div id="form" class="hidden">
        <script type="text/javascript" src="{{ "js/middleware.js" | absURL }}"></script>
{{ end }}

{{ define "svg-extra" }}
  {{ if .Content }}
    {{ partialCached "content-svg" . }}
  {{ end }}
{{ end }}
